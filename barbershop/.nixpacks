phases:
  setup:
    nixPkgs:
      - php82
      - php82Extensions.composer
      - nodejs_20
  install:
    cmds:
      - composer install --no-dev --optimize-autoloader
      - npm ci --only=production
      - npm run build
  build:
    cmds:
      - php artisan config:cache
      - php artisan route:cache
      - php artisan view:cache

start:
  cmd: php artisan serve --host=0.0.0.0 --port=$PORT 