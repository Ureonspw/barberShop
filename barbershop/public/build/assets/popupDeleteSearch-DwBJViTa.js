import{r as n,x as L,J as $,j as e}from"./app-CvuLb3Vv.js";import{C as a}from"./popupuser.module-Ck2_fLBJ.js";import{G as R,H as x,v as G,I as o,w as J}from"./index-kRwWHyEk.js";import"./iconBase-wn5QK0Z3.js";function O({onClose:l,title:S,items:m,searchPlaceholder:C,deleteRoute:I,icon:T,displayField:r,idField:c}){const[i,d]=n.useState(""),[t,h]=n.useState(null),[w,u]=n.useState(!1),[j,k]=n.useState(m),{setData:E,delete:y,processing:p,reset:B}=L({[c]:""}),{props:N}=$(),[f,v]=n.useState(null),[b,g]=n.useState(null);n.useEffect(()=>{const s=N.flash;s!=null&&s.success&&(v(s.success),setTimeout(()=>{v(null),l()},2500)),s!=null&&s.error&&(g(s.error),setTimeout(()=>g(null),3e3))},[N.flash,l]),n.useEffect(()=>{const s=m.filter(H=>H[r].toLowerCase().includes(i.toLowerCase()));k(s)},[i,m,r]);const D=s=>{h(s),E(c,s[c]),d(s[r])},M=s=>{s.preventDefault(),t&&y(route(I,{[c]:t[c]}),{onFinish:()=>{B(),h(null),d(""),u(!1)}})},A=()=>{t&&u(!0)};return e.jsx("div",{className:a.overlay,onClick:s=>s.target===s.currentTarget&&l(),children:e.jsxs("div",{className:a.popup,children:[e.jsxs("h2",{children:[T," ",S]}),f&&e.jsxs("div",{className:"mb-4 text-green-400",children:[e.jsx(R,{className:"inline mr-2"})," ",f]}),b&&e.jsxs("div",{className:"mb-4 text-red-400",children:[e.jsx(x,{className:"inline mr-2"})," ",b]}),w?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:a.confirmationBox,children:[e.jsxs("div",{className:a.confirmationHeader,children:[e.jsx(J,{className:a.confirmationIcon}),e.jsx("h3",{className:a.confirmationTitle,children:"Confirmation de suppression"})]}),e.jsxs("p",{className:a.confirmationText,children:['Êtes-vous sûr de vouloir supprimer "',t==null?void 0:t[r],'" ? Cette action est irréversible.']})]}),e.jsx("form",{onSubmit:M,children:e.jsxs("div",{className:a.btns,children:[e.jsx("button",{type:"submit",disabled:p,className:`${a.validateBtn} bg-red-600 hover:bg-red-700`,children:p?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"inline mr-2 animate-spin"})," Suppression..."]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"inline mr-2"})," Confirmer la suppression"]})}),e.jsxs("button",{type:"button",onClick:()=>u(!1),className:a.cancelBtn,children:[e.jsx(x,{className:"inline mr-2"})," Annuler"]})]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:a.searchContainer,children:[e.jsx(G,{className:a.searchIcon}),e.jsx("input",{type:"text",value:i,onChange:s=>d(s.target.value),className:a.searchInput,placeholder:C})]}),i&&e.jsx("div",{className:a.dropdownList,children:j.length>0?j.map(s=>e.jsxs("div",{onClick:()=>D(s),className:a.dropdownItem,children:[e.jsx("span",{className:a.dropdownItemText,children:s[r]}),e.jsx(o,{className:a.dropdownItemIcon})]},s[c])):e.jsx("div",{className:a.noResults,children:"Aucun résultat trouvé"})}),t&&e.jsxs("div",{className:a.selectedItem,children:[e.jsx("div",{className:a.selectedItemHeader,children:"Élément sélectionné :"}),e.jsx("div",{className:a.selectedItemText,children:t[r]})]}),e.jsxs("div",{className:a.btns,children:[e.jsxs("button",{type:"button",onClick:A,disabled:!t,className:`${a.validateBtn} ${t?"":"opacity-50 cursor-not-allowed"}`,children:[e.jsx(o,{className:"inline mr-2"})," Supprimer"]}),e.jsxs("button",{type:"button",onClick:l,className:a.cancelBtn,children:[e.jsx(x,{className:"inline mr-2"})," Annuler"]})]})]})]})})}export{O as default};
