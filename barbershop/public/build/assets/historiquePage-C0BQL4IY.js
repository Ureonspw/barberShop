import{r as u,j as e,t as x,S as C}from"./app-CvuLb3Vv.js";import{A as I,C as s}from"./AuthenticatedLayoutcaissier-Da-n7tXx.js";import{u as q,p as j,f as A,j as p,F as G,k as L,v as T,l as D,s as w,e as B,d as H,m as k,n as R,o as $}from"./index-kRwWHyEk.js";import{a as V,b as E}from"./index-Dc8vIfrn.js";import"./ResponsiveNavLink-BWydkspo.js";import"./barberlogo-CCddF666.js";import"./transition-DKRl218_.js";import"./iconBase-wn5QK0Z3.js";function Z({paiements:n,stats:r,salons:b,coiffeurs:g,modesPaiement:F,statutsPaiement:z,filters:l,selectedSalonId:c}){const[t,i]=u.useState({salon:l.salon||"",coiffeur:l.coiffeur||"",client:l.client||"",mode_paiement:l.mode_paiement||"",statut_paiement:l.statut_paiement||"",date_debut:l.date_debut||"",date_fin:l.date_fin||"",montant_min:l.montant_min||"",montant_max:l.montant_max||""}),[d,v]=u.useState("created_at"),[o,m]=u.useState("desc"),h=a=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(a),S=a=>new Date(a).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),y=a=>{switch(a){case"especes":return e.jsx(E,{});case"carte":return e.jsx(p,{});case"cheque":return e.jsx(V,{});default:return e.jsx(p,{})}},N=()=>{const a={...t,sort_by:d,sort_order:o};c&&(a.salon_id=c),C.get(route("caissier.historique"),a,{preserveState:!0,preserveScroll:!0})},M=()=>{i({salon:"",coiffeur:"",client:"",mode_paiement:"",statut_paiement:"",date_debut:"",date_fin:"",montant_min:"",montant_max:""}),v("created_at"),m("desc");const a=c?{salon_id:c}:{};C.get(route("caissier.historique"),a,{preserveState:!0,preserveScroll:!0})},f=a=>{d===a?m(o==="asc"?"desc":"asc"):(v(a),m("desc")),N()},_=a=>d!==a?e.jsx(k,{}):o==="asc"?e.jsx(R,{}):e.jsx($,{});return e.jsx(I,{children:e.jsx("div",{className:s.caissierPage,children:e.jsxs("div",{className:s.container,children:[e.jsxs("div",{className:s.header,children:[e.jsx("div",{className:s.headerTop,children:e.jsxs(x,{href:route("caissier"),className:s.backButton,children:[e.jsx(q,{}),"Retour au tableau de bord"]})}),e.jsx("h1",{children:"Historique des Paiements"}),e.jsx("p",{children:"Consultez et filtrez l'historique complet des paiements"})]}),e.jsxs("div",{className:s.statsGrid,children:[e.jsxs("div",{className:s.statCard,children:[e.jsx("div",{className:s.statIcon,children:e.jsx(j,{})}),e.jsxs("div",{className:s.statContent,children:[e.jsx("div",{className:s.statValue,children:r.total_paiements}),e.jsx("div",{className:s.statLabel,children:"Total Paiements"})]})]}),e.jsxs("div",{className:s.statCard,children:[e.jsx("div",{className:s.statIcon,children:e.jsx(A,{})}),e.jsxs("div",{className:s.statContent,children:[e.jsx("div",{className:s.statValue,children:h(r.total_montant)}),e.jsx("div",{className:s.statLabel,children:"Montant Total"})]})]}),e.jsxs("div",{className:s.statCard,children:[e.jsx("div",{className:s.statIcon,children:e.jsx(p,{})}),e.jsxs("div",{className:s.statContent,children:[e.jsx("div",{className:s.statValue,children:h(r.moyenne_montant)}),e.jsx("div",{className:s.statLabel,children:"Moyenne"})]})]}),e.jsxs("div",{className:s.statCard,children:[e.jsx("div",{className:s.statIcon,children:e.jsx(G,{})}),e.jsxs("div",{className:s.statContent,children:[e.jsx("div",{className:s.statValue,children:r.paiements_aujourdhui}),e.jsx("div",{className:s.statLabel,children:"Aujourd'hui"})]})]})]}),e.jsx("div",{className:s.filterSection,children:e.jsxs("div",{className:s.filterCard,children:[e.jsxs("div",{className:s.filterHeader,children:[e.jsx(L,{}),e.jsx("h3",{children:"Filtres de Recherche"})]}),e.jsxs("div",{className:s.filtersGrid,children:[e.jsxs("div",{className:s.filterGroup,children:[e.jsx("label",{children:"Salon"}),e.jsxs("select",{value:t.salon,onChange:a=>i({...t,salon:a.target.value}),className:s.filterSelect,children:[e.jsx("option",{value:"",children:"Tous les salons"}),b.map(a=>e.jsx("option",{value:a.id_salon,children:a.nom},a.id_salon))]})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsx("label",{children:"Coiffeur"}),e.jsxs("select",{value:t.coiffeur,onChange:a=>i({...t,coiffeur:a.target.value}),className:s.filterSelect,children:[e.jsx("option",{value:"",children:"Tous les coiffeurs"}),g.map(a=>e.jsxs("option",{value:a.id_coiffeur,children:[a.nom," - ",a.specialite]},a.id_coiffeur))]})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsx("label",{children:"Client"}),e.jsx("input",{type:"text",value:t.client,onChange:a=>i({...t,client:a.target.value}),placeholder:"Nom du client...",className:s.filterInput})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsx("label",{children:"Mode de Paiement"}),e.jsxs("select",{value:t.mode_paiement,onChange:a=>i({...t,mode_paiement:a.target.value}),className:s.filterSelect,children:[e.jsx("option",{value:"",children:"Tous les modes"}),F.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsx("label",{children:"Date de début"}),e.jsx("input",{type:"date",value:t.date_debut,onChange:a=>i({...t,date_debut:a.target.value}),className:s.filterInput})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsx("label",{children:"Date de fin"}),e.jsx("input",{type:"date",value:t.date_fin,onChange:a=>i({...t,date_fin:a.target.value}),className:s.filterInput})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsx("label",{children:"Montant min (FCFA)"}),e.jsx("input",{type:"number",value:t.montant_min,onChange:a=>i({...t,montant_min:a.target.value}),placeholder:"0",className:s.filterInput})]}),e.jsxs("div",{className:s.filterGroup,children:[e.jsx("label",{children:"Montant max (FCFA)"}),e.jsx("input",{type:"number",value:t.montant_max,onChange:a=>i({...t,montant_max:a.target.value}),placeholder:"1000",className:s.filterInput})]})]}),e.jsxs("div",{className:s.filterActions,children:[e.jsxs("button",{onClick:N,className:s.applyButton,children:[e.jsx(T,{}),"Appliquer les filtres"]}),e.jsx("button",{onClick:M,className:s.clearButton,children:"Effacer les filtres"}),e.jsxs(x,{href:route("caissier.historique.export"),className:s.exportButton,children:[e.jsx(D,{}),"Exporter CSV"]})]})]})}),e.jsxs("div",{className:s.historiqueSection,children:[e.jsxs("h2",{className:s.historiqueTitle,children:[e.jsx(j,{}),"Liste des Paiements (",n.total," résultats)"]}),n.data.length>0?e.jsx("div",{className:s.tableContainer,children:e.jsxs("table",{className:s.historiqueTable,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>f("date_paiement"),className:s.sortableHeader,children:["Date ",_("date_paiement")]}),e.jsx("th",{children:"Client"}),e.jsx("th",{children:"Coiffeur"}),e.jsx("th",{children:"Salon"}),e.jsxs("th",{onClick:()=>f("somme_paiement"),className:s.sortableHeader,children:["Montant ",_("somme_paiement")]}),e.jsx("th",{children:"Mode"}),e.jsx("th",{children:"Statut"})]})}),e.jsx("tbody",{children:n.data.map(a=>e.jsxs("tr",{className:s.tableRow,children:[e.jsx("td",{children:S(a.date_paiement)}),e.jsx("td",{children:e.jsxs("div",{className:s.clientInfo,children:[e.jsx(w,{}),e.jsx("span",{children:a.client.nom}),a.client.contacts&&e.jsx("small",{children:a.client.contacts})]})}),e.jsx("td",{children:e.jsxs("div",{className:s.coiffeurInfo,children:[e.jsx(B,{}),e.jsx("span",{children:a.client.coiffeur.nom}),e.jsx("small",{children:a.client.coiffeur.specialite})]})}),e.jsx("td",{children:e.jsxs("div",{className:s.salonInfo,children:[e.jsx(H,{}),e.jsx("span",{children:a.salon.nom}),e.jsx("small",{children:a.salon.adresse})]})}),e.jsx("td",{className:s.montantCell,children:h(a.somme_paiement)}),e.jsx("td",{children:e.jsxs("span",{className:`${s.modePaiement} ${s.modePaiement[a.mode_paiement]}`,children:[y(a.mode_paiement),a.mode_paiement]})}),e.jsx("td",{children:e.jsx("span",{className:`${s.statutPaiement} ${s.statutPaiement[a.statut_paiement]}`,children:a.statut_paiement})})]},a.id_paiement))})]})}):e.jsxs("div",{className:s.emptyState,children:[e.jsx(j,{size:64}),e.jsx("p",{children:"Aucun paiement trouvé avec ces critères"})]}),n.last_page>1&&e.jsx("div",{className:s.pagination,children:n.links.map((a,P)=>e.jsx(x,{href:a.url,className:`${s.paginationLink} ${a.active?s.activePage:""}`,dangerouslySetInnerHTML:{__html:a.label}},P))})]})]})})})}export{Z as default};
